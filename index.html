<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Network</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            padding: 20px;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 { color: #2c3e50; }
        #switchButton {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        #switchButton:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }
        .mermaid {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .mermaid .node rect,
        .mermaid .node circle,
        .mermaid .node ellipse,
        .mermaid .node polygon,
        .mermaid .node path {
            transition: all 0.3s ease;
        }
        .mermaid .clickable:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.3));
        }
        .mermaid .edgePath {
            stroke-width: 2px !important;
        }
    </style>
</head>
<body>
    <h1 id="graphTitle">Operations Flow</h1>
    <button id="switchButton">Switch to Infra Tree</button>
    <div id="graphDiv"></div>
    <script>
        const operationsFlow = `
        graph TD
            Advertisers -->|Outreach/RFP| Media_Planning
            Media_Planning -->|Closed Won| Campaign_Management
            Inventory <-->|Infra| Campaign_Management 
            Campaign_Management --> Deliverables
            Deliverables -->|KPIs achieved| Billing
            Billing -->|Invoice| Advertisers

            click Media_Planning "media_planning.html" "Go to Media Planning page"
            click Campaign_Management "campaign_management.html" "Go to Campaign Management page"
            click Inventory "inventory.html" "Go to Inventory page"
            click Billing "billing.html" "Go to Billing page"

            classDef clickable cursor:pointer;
            class Media_Planning,Campaign_Management,Inventory,Billing clickable;
        `;

        const infraTree = `
        graph TD
            Mosaic <--> Kasper
            Salesforce --> Mosaic
            Mosaic <--> Peregrine
            Mosaic <--> Beeswax

            Campaign_setup["Campaign Setup"] --> Mosaic
            Segments --> Campaign_setup
            Lists --> Campaign_setup
            Creatives --> Campaign_setup
            Tags --> Campaign_setup

            Inventory <--> Peregrine
            Inventory <--> Beeswax

            DropBox --> Lists
            DropBox --> Creatives
            DropBox --> Tags

            Peregrine --> Pixel_Pinger["Pixel Pinger"]
            Peregrine --> SSP_Data["SSP Data"]
            Beeswax --> SSP_Data
            SSP_Data --> Segments

            Pixel_Pinger --> DAS
            DAS --> Insights
            DAS --> Steller
            Steller --> Kasper

            Pixel_Pinger --> Segments
            Insights --> Reports
            SSP_Data --> Elastic

            Reports --> Standard
            Reports --> Advanced

            Sellers --> Salesforce
            Advertisers --> Sellers
        `;

        let currentGraph = 'operations';
        
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'neutral',
            fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif',
            flowchart: {
                curve: 'linear',
                nodeSpacing: 50,
                rankSpacing: 50,
            }
        });

        function renderGraph() {
            const graphDiv = document.getElementById('graphDiv');
            const graphDefinition = currentGraph === 'operations' ? operationsFlow : infraTree;
            mermaid.render('graphDiv', graphDefinition, (svgCode) => {
                graphDiv.innerHTML = svgCode;
            });
        }

        document.addEventListener('DOMContentLoaded', renderGraph);

        document.getElementById('switchButton').addEventListener('click', function() {
            const graphTitle = document.getElementById('graphTitle');
            const switchButton = document.getElementById('switchButton');
            
            if (currentGraph === 'operations') {
                currentGraph = 'infra';
                graphTitle.textContent = 'Infra Tree';
                switchButton.textContent = 'Switch to Operations Flow';
            } else {
                currentGraph = 'operations';
                graphTitle.textContent = 'Operations Flow';
                switchButton.textContent = 'Switch to Infra Tree';
            }
            
            renderGraph();
        });
    </script>
</body>
</html>
